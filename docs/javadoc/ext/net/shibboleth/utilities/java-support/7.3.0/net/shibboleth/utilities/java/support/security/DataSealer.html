<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Thu Nov 10 13:35:43 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>DataSealer (java-support 7.3.0 API)</title>
<meta name="date" content="2016-11-10">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DataSealer (java-support 7.3.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataSealer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataExpiredException.html" title="class in net.shibboleth.utilities.java.support.security"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?net/shibboleth/utilities/java/support/security/DataSealer.html" target="_top">Frames</a></li>
<li><a href="DataSealer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.shibboleth.utilities.java.support.security</div>
<h2 title="Class DataSealer" class="title">Class DataSealer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html" title="class in net.shibboleth.utilities.java.support.component">net.shibboleth.utilities.java.support.component.AbstractInitializableComponent</a></li>
<li>
<ul class="inheritance">
<li>net.shibboleth.utilities.java.support.security.DataSealer</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../net/shibboleth/utilities/java/support/component/Component.html" title="interface in net.shibboleth.utilities.java.support.component">Component</a>, <a href="../../../../../../net/shibboleth/utilities/java/support/component/DestructableComponent.html" title="interface in net.shibboleth.utilities.java.support.component">DestructableComponent</a>, <a href="../../../../../../net/shibboleth/utilities/java/support/component/InitializableComponent.html" title="interface in net.shibboleth.utilities.java.support.component">InitializableComponent</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">DataSealer</span>
extends <a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html" title="class in net.shibboleth.utilities.java.support.component">AbstractInitializableComponent</a></pre>
<div class="block">Applies a MAC to time-limited information and encrypts with a symmetric key.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#CHUNK_SIZE">CHUNK_SIZE</a></strong></code>
<div class="block">Size of UTF-8 data chunks to read/write.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.apache.commons.codec.BinaryDecoder</code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#decoder">decoder</a></strong></code>
<div class="block">Decodes encrypted string to bytes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private org.apache.commons.codec.BinaryEncoder</code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#encoder">encoder</a></strong></code>
<div class="block">Encodes encrypted bytes to string.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerKeyStrategy.html" title="interface in net.shibboleth.utilities.java.support.security">DataSealerKeyStrategy</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#keyStrategy">keyStrategy</a></strong></code>
<div class="block">Source of keys.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="http://www.slf4j.org/apidocs/org/slf4j/Logger.html?is-external=true" title="class or interface in org.slf4j">Logger</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#log">log</a></strong></code>
<div class="block">Class logger.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html?is-external=true" title="class or interface in java.security">SecureRandom</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#random">random</a></strong></code>
<div class="block">Source of secure random data.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#DataSealer()">DataSealer</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#doInitialize()">doInitialize</a></strong>()</code>
<div class="block">Performs the initialization of the component.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#extractAndCheckDecryptedData(byte[])">extractAndCheckDecryptedData</a></strong>(byte[]&nbsp;decryptedBytes)</code>
<div class="block">Extract the GZIP'd data and test for expiration before returning it.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#setDecoder(org.apache.commons.codec.BinaryDecoder)">setDecoder</a></strong>(org.apache.commons.codec.BinaryDecoder&nbsp;d)</code>
<div class="block">Sets the decoder to use to convert a ciphertext string to bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#setEncoder(org.apache.commons.codec.BinaryEncoder)">setEncoder</a></strong>(org.apache.commons.codec.BinaryEncoder&nbsp;e)</code>
<div class="block">Sets the encoder to use to produce a ciphertext string from bytes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#setKeyStrategy(net.shibboleth.utilities.java.support.security.DataSealerKeyStrategy)">setKeyStrategy</a></strong>(<a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerKeyStrategy.html" title="interface in net.shibboleth.utilities.java.support.security">DataSealerKeyStrategy</a>&nbsp;strategy)</code>
<div class="block">Set the key strategy.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#setRandom(java.security.SecureRandom)">setRandom</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html?is-external=true" title="class or interface in java.security">SecureRandom</a>&nbsp;r)</code>
<div class="block">Set the pseudorandom generator.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#testEncryption(javax.crypto.SecretKey)">testEncryption</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/javax/crypto/SecretKey.html?is-external=true" title="class or interface in javax.crypto">SecretKey</a>&nbsp;key)</code>
<div class="block">Run a test over the configured bean properties.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#unwrap(java.lang.String)">unwrap</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;wrapped)</code>
<div class="block">Decrypts and verifies an encrypted bundle created with <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#wrap(java.lang.String,%20long)"><code>wrap(String, long)</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#unwrap(java.lang.String,%20java.lang.StringBuffer)">unwrap</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;wrapped,
      <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html?is-external=true" title="class or interface in java.lang">StringBuffer</a>&nbsp;keyUsed)</code>
<div class="block">Decrypts and verifies an encrypted bundle created with <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#wrap(java.lang.String,%20long)"><code>wrap(String, long)</code></a>, optionally
 returning the label of the key used to encrypt the data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#wrap(java.lang.String,%20long)">wrap</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;data,
    long&nbsp;exp)</code>
<div class="block">Encodes data into an AEAD-encrypted blob, gzip(exp|data)
 
 
 exp = expiration time of the data; 8 bytes; Big-endian
 data = the data; a UTF-8-encoded string
 </div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_net.shibboleth.utilities.java.support.component.AbstractInitializableComponent">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;net.shibboleth.utilities.java.support.component.<a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html" title="class in net.shibboleth.utilities.java.support.component">AbstractInitializableComponent</a></h3>
<code><a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html#destroy()">destroy</a>, <a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html#doDestroy()">doDestroy</a>, <a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html#initialize()">initialize</a>, <a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html#isDestroyed()">isDestroyed</a>, <a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html#isInitialized()">isInitialized</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="CHUNK_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CHUNK_SIZE</h4>
<pre>private static final&nbsp;int CHUNK_SIZE</pre>
<div class="block">Size of UTF-8 data chunks to read/write.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../constant-values.html#net.shibboleth.utilities.java.support.security.DataSealer.CHUNK_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre><a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
private&nbsp;<a href="http://www.slf4j.org/apidocs/org/slf4j/Logger.html?is-external=true" title="class or interface in org.slf4j">Logger</a> log</pre>
<div class="block">Class logger.</div>
</li>
</ul>
<a name="keyStrategy">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keyStrategy</h4>
<pre><a href="../../../../../../net/shibboleth/utilities/java/support/annotation/constraint/NonnullAfterInit.html" title="annotation in net.shibboleth.utilities.java.support.annotation.constraint">@NonnullAfterInit</a>
private&nbsp;<a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerKeyStrategy.html" title="interface in net.shibboleth.utilities.java.support.security">DataSealerKeyStrategy</a> keyStrategy</pre>
<div class="block">Source of keys.</div>
</li>
</ul>
<a name="random">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>random</h4>
<pre><a href="../../../../../../net/shibboleth/utilities/java/support/annotation/constraint/NonnullAfterInit.html" title="annotation in net.shibboleth.utilities.java.support.annotation.constraint">@NonnullAfterInit</a>
private&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html?is-external=true" title="class or interface in java.security">SecureRandom</a> random</pre>
<div class="block">Source of secure random data.</div>
</li>
</ul>
<a name="encoder">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encoder</h4>
<pre><a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
private&nbsp;org.apache.commons.codec.BinaryEncoder encoder</pre>
<div class="block">Encodes encrypted bytes to string.</div>
</li>
</ul>
<a name="decoder">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>decoder</h4>
<pre><a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
private&nbsp;org.apache.commons.codec.BinaryDecoder decoder</pre>
<div class="block">Decodes encrypted string to bytes.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DataSealer()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DataSealer</h4>
<pre>public&nbsp;DataSealer()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setKeyStrategy(net.shibboleth.utilities.java.support.security.DataSealerKeyStrategy)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setKeyStrategy</h4>
<pre>public&nbsp;void&nbsp;setKeyStrategy(<a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
                  <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerKeyStrategy.html" title="interface in net.shibboleth.utilities.java.support.security">DataSealerKeyStrategy</a>&nbsp;strategy)</pre>
<div class="block">Set the key strategy.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>strategy</code> - key strategy</dd></dl>
</li>
</ul>
<a name="setRandom(java.security.SecureRandom)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRandom</h4>
<pre>public&nbsp;void&nbsp;setRandom(<a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
             <a href="http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html?is-external=true" title="class or interface in java.security">SecureRandom</a>&nbsp;r)</pre>
<div class="block">Set the pseudorandom generator.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>r</code> - the pseudorandom generator to set</dd></dl>
</li>
</ul>
<a name="setEncoder(org.apache.commons.codec.BinaryEncoder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEncoder</h4>
<pre>public&nbsp;void&nbsp;setEncoder(<a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
              org.apache.commons.codec.BinaryEncoder&nbsp;e)</pre>
<div class="block">Sets the encoder to use to produce a ciphertext string from bytes. Default is standard base-64 encoding without
 line breaks.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>e</code> - Byte-to-string encoder.</dd></dl>
</li>
</ul>
<a name="setDecoder(org.apache.commons.codec.BinaryDecoder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDecoder</h4>
<pre>public&nbsp;void&nbsp;setDecoder(<a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
              org.apache.commons.codec.BinaryDecoder&nbsp;d)</pre>
<div class="block">Sets the decoder to use to convert a ciphertext string to bytes. Default is standard base-64 decoding.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>d</code> - String-to-byte decoder.</dd></dl>
</li>
</ul>
<a name="doInitialize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doInitialize</h4>
<pre>public&nbsp;void&nbsp;doInitialize()
                  throws <a href="../../../../../../net/shibboleth/utilities/java/support/component/ComponentInitializationException.html" title="class in net.shibboleth.utilities.java.support.component">ComponentInitializationException</a></pre>
<div class="block">Performs the initialization of the component. This method is executed within the lock on the object being
 initialized.
 
 The default implementation of this method is a no-op.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html#doInitialize()">doInitialize</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../net/shibboleth/utilities/java/support/component/AbstractInitializableComponent.html" title="class in net.shibboleth.utilities.java.support.component">AbstractInitializableComponent</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../net/shibboleth/utilities/java/support/component/ComponentInitializationException.html" title="class in net.shibboleth.utilities.java.support.component">ComponentInitializationException</a></code> - thrown if there is a problem initializing the component</dd></dl>
</li>
</ul>
<a name="unwrap(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unwrap</h4>
<pre><a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;unwrap(<a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a><a href="../../../../../../net/shibboleth/utilities/java/support/annotation/constraint/NotEmpty.html" title="annotation in net.shibboleth.utilities.java.support.annotation.constraint">@NotEmpty</a>
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;wrapped)
              throws <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></pre>
<div class="block">Decrypts and verifies an encrypted bundle created with <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#wrap(java.lang.String,%20long)"><code>wrap(String, long)</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>wrapped</code> - the encoded blob</dd>
<dt><span class="strong">Returns:</span></dt><dd>the decrypted data, if it's unexpired</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></code> - if the data cannot be unwrapped and verified</dd></dl>
</li>
</ul>
<a name="unwrap(java.lang.String, java.lang.StringBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unwrap</h4>
<pre><a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;unwrap(<a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a><a href="../../../../../../net/shibboleth/utilities/java/support/annotation/constraint/NotEmpty.html" title="annotation in net.shibboleth.utilities.java.support.annotation.constraint">@NotEmpty</a>
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;wrapped,
                    <a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</a>
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html?is-external=true" title="class or interface in java.lang">StringBuffer</a>&nbsp;keyUsed)
              throws <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></pre>
<div class="block">Decrypts and verifies an encrypted bundle created with <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealer.html#wrap(java.lang.String,%20long)"><code>wrap(String, long)</code></a>, optionally
 returning the label of the key used to encrypt the data.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>wrapped</code> - the encoded blob</dd><dd><code>keyUsed</code> - a buffer to receive the alias of the key used to encrypt the data</dd>
<dt><span class="strong">Returns:</span></dt><dd>the decrypted data, if it's unexpired</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></code> - if the data cannot be unwrapped and verified</dd></dl>
</li>
</ul>
<a name="extractAndCheckDecryptedData(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>extractAndCheckDecryptedData</h4>
<pre><a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
private&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;extractAndCheckDecryptedData(<a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a><a href="../../../../../../net/shibboleth/utilities/java/support/annotation/constraint/NotEmpty.html" title="annotation in net.shibboleth.utilities.java.support.annotation.constraint">@NotEmpty</a>
                                          byte[]&nbsp;decryptedBytes)
                                     throws <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></pre>
<div class="block">Extract the GZIP'd data and test for expiration before returning it.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>decryptedBytes</code> - the data we are looking at</dd>
<dt><span class="strong">Returns:</span></dt><dd>the decoded data if it is valid and unexpired</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></code> - if the data cannot be unwrapped and verified</dd></dl>
</li>
</ul>
<a name="wrap(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wrap</h4>
<pre><a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;wrap(<a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a><a href="../../../../../../net/shibboleth/utilities/java/support/annotation/constraint/NotEmpty.html" title="annotation in net.shibboleth.utilities.java.support.annotation.constraint">@NotEmpty</a>
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;data,
                  long&nbsp;exp)
            throws <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></pre>
<div class="block">Encodes data into an AEAD-encrypted blob, gzip(exp|data)
 
 <ul>
 <li>exp = expiration time of the data; 8 bytes; Big-endian</li>
 <li>data = the data; a UTF-8-encoded string</li>
 </ul>
 
 <p>As part of encryption, the key alias is supplied as additional authenticated data
 to the cipher. Afterwards, the encrypted data is prepended by the IV and then again by the alias
 (in length-prefixed UTF-8 format), which identifies the key used. Finally the result is base64-encoded.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - the data to wrap</dd><dd><code>exp</code> - expiration time</dd>
<dt><span class="strong">Returns:</span></dt><dd>the encoded blob</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></code> - if the wrapping operation fails</dd></dl>
</li>
</ul>
<a name="testEncryption(javax.crypto.SecretKey)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>testEncryption</h4>
<pre>private&nbsp;void&nbsp;testEncryption(<a href="http://docs.oracle.com/javaee/5/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a>
                  <a href="http://docs.oracle.com/javase/7/docs/api/javax/crypto/SecretKey.html?is-external=true" title="class or interface in javax.crypto">SecretKey</a>&nbsp;key)
                     throws <a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></pre>
<div class="block">Run a test over the configured bean properties.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - key to test</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security">DataSealerException</a></code> - if the test fails</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataSealer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataExpiredException.html" title="class in net.shibboleth.utilities.java.support.security"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../net/shibboleth/utilities/java/support/security/DataSealerException.html" title="class in net.shibboleth.utilities.java.support.security"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?net/shibboleth/utilities/java/support/security/DataSealer.html" target="_top">Frames</a></li>
<li><a href="DataSealer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 1999&#x2013;2016 <a href="https://shibboleth.net">Shibboleth Consortium</a>. All rights reserved.</small></p>
</body>
</html>
